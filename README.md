### BIT-TenLinesOfCodes2025-Tetris-CompetitonEntryByRyaho
# 北京理工大学 十行代码2025 俄罗斯方块赛道 参赛作品
本游戏采用c++和其支持的一个教学用简易图形库”easyx”实现,编写时间为2025年3月底
  
### 游戏操作说明
打开”北理工的恶龙：经典俄罗斯方块.exe”后,进入主界面;

在主界面按下[ESC]强制退出游戏,按[空格]键开始游戏,进入游戏界面;

左侧为游戏区域,右侧为状态栏,从上至下依次显示下一个方块的预览、当前得分、已经放置的方块、当前难度、距离难度升级还差的方块数、历史最高分.
按键说明:
将当前下落的方块尝试向左移动
将当前下落的方块尝试向右移动
尝试将当前下落的方块逆时针旋转
尝试将当前下落的方块顺时针旋转
[空格] 将当前下落的方块直接移动到目前位置能下落到的最下方(快速下落)
[F1] 进入/离开开发者模式;开发者模式生成的方块都只会是直线的形状.
[ESC]强制退出游戏

游戏结束后进入结算界面;

在结算界面按下[ESC]强制退出游戏,按[空格]键重新开始游戏,回到开始界面.

### 开发与运行环境
#### 设备信息:
* 操作系统	Windows11家庭版
* *CPU Intel 13980HX
* RAM 64G

#### 开发环境
开发环境:Visual Studio 2022
C++标准:默认(ISO C++14 标准)

### 游戏玩法和机制说明&设计理念阐释
本游戏采用经典的俄罗斯方块玩法:由小方块组成的不同形状的板块陆续从屏幕上方落下来,玩家通过调整板块的位置和方向,使它们在屏幕底部拼出完整的一条或几条.这些完整的横条会随即消失,给新落下来的板块腾出空间,与此同时,玩家得到分数奖励.没有被消除掉的方块不断堆积起来,一旦堆到屏幕顶端，游戏就会结束.此外,游戏开始时处于简单难度,当累积的下落方块数分别达到10、25、50后,难度分别提升为一般、困难、地狱,方块向下移动的间隔从简单难度的800ms分别降低至640ms、500ms和360ms.
游戏背景设定:为了纪念北理工众师生战胜恶龙的那次胜利,这款《北理工的恶龙：经典俄罗斯方块》被开发了出来,在游戏中,玩家需要扮演北理工遭到恶龙袭击时挺身而出对抗恶龙的勇士,用俄罗斯方块击败恶龙!

在游戏中使用有效的按键后会播放MC的点击音效;当方块进行有效的快速下降(即至少下降了一格)后,会随机从加载的两种MC村民受伤音效中播放一个;当难度提高时,会播放MC玩家升级的音效;当一行方块被消除时,会播放MC吸收经验的音效;当游戏结束时,会播放MC完成挑战的音效.

当方块执行有效的快速下降后,会重置方块下落的计时器,以便给玩家留出时间微操.

当同时消除的行数越多时,这次消除时消除每行的得分也越高.

### 备注
* "北理工的恶龙"为参赛题目
* "十行代码"为每年春季北理工网协举办的校级编程比赛,此为第三届;所有本科生均可参与.一般分为两个赛道,一个为小软件, 一个为小游戏; 今年的赛道一为实现一个类vim编辑器,赛道二为实现一个俄罗斯方块.
* 本作品最终获得俄罗斯方块赛道二等奖
* 自我评价:
  * 优点
    * 代码尚算优雅
  * 缺点
    * 内容少,缺乏创新(这可能是我没得一等奖的主要原因)
    * 有些地方没来得及打磨, 一是不能实现非常极端的微操, 二是部分数字文本显示没有居中对齐.
  课业比较忙, 以后如果有空可能会修一下数字文本显示的问题.
* 虽然本项目为自己独立完成, 但是从voidmatrix的视频中学到了很多东西, 例如基本的有限状态机, 这对我实现本项目帮助很大, 也是这一项目"优点"的主要来源.
    

### 多文件编程: 文件功能简述
* Russian Blocks.cpp
    程序入口、主循环与资源加载
* class_block.h:
  单个方块类的定义,主要包含位置和绘制等功能.绘制方块采用Easyx的基本图形绘制.
* class_shape.h
  管理四个方块形成的一个形状,包括玩家的操作、碰撞检测和包含方块的数据和渲染管理.
* state.h
  有限状态机的状态类的虚基类,包含一个游戏阶段的数据管理、渲染和玩家控制的接口声明.下面的状态类均是此类的派生类.
* state_home.h
  有限状态机的状态类.管理开始页面的数据管理、渲染和玩家控制的接口实现.
* state_end.h
  有限状态机的状态类.管理游戏结束后页面的数据管理、渲染和玩家控制的接口实现.
* state_game.h
  有限状态机的状态类.管理游戏进行中的数据管理、渲染和玩家控制的接口实现.
* class_statemanager.h
  有限状态机的状态管理器,利用多态来将不同状态间的更新、渲染和控制集成在一起.
* class_vector.h
  用于储存方块基本位置的向量类.
* utils.h
  一些工具函数,如随机初始化方块形状和颜色等.

### 素材来源
UI:Kenny 上的免费素材包 UI Pack
音效: Minecraft
封面图: ChatGpt
字体: IPix
